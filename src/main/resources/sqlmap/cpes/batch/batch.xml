<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="batch">
	
	<select id="selectOverThreeDaysApplic" resultType="java.util.HashMap">
		/** selectOverThreeDaysApplic **/
		SELECT
			U.USER_EMAIL AS userEmail
			, U.USER_CELL AS userCell
			, U.EMAIL_NTCE_AGREE_YN AS emailNtceAgreeYn
			, U.SMS_NTCE_AGREE_YN AS smsNtceAgreeYn
			, U.USER_SEQ	AS userSeq
		FROM CPES_VACANCY V
	   INNER JOIN CPES_APPLIC A 
	      ON V.VACANCY_SEQ = A.VACANCY_SEQ
	   INNER JOIN CPES_COMPNY C
	      ON C.COMPNY_SEQ = V.COMPNY_SEQ
	   WHERE A.RESUME_OPEN_DT IS NULL
		 AND A.REG_DT = (NOW() - INTERVAL 3 DAY)
	</select>
	
	<select id="selectOverThreeDaysOffer" resultType="java.util.HashMap">
		/** selectOverThreeDaysOffer **/
		SELECT
			U.USER_EMAIL AS userEmail
			, U.USER_CELL AS userCell
			, U.EMAIL_NTCE_AGREE_YN AS emailNtceAgreeYn
			, U.SMS_NTCE_AGREE_YN AS smsNtceAgreeYn
			, U.USER_SEQ	AS userSeq
		FROM CPES_RESUME R 
	   INNER JOIN CPES_OFFER O 
	      ON R.RESUME_SEQ = O.RESUME_SEQ
	   INNER JOIN CPES_USER U
	      ON U.USER_SEQ = R.USER_SEQ
	   WHERE O.OFFER_OPEN_DT IS NULL
		 AND O.REG_DT = (NOW() - INTERVAL 3 DAY)
	</select>
</mapper>
