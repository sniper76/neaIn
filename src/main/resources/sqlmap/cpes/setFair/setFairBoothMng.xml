<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="setFairBoothMng">

	<update id="updateFairMng" parameterType="FairBoothMngBean">
		UPDATE
			CPES_FAIR_MST
		<set>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(boothTel)">BOOTH_TEL = #{boothTel},</if>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(boothEmail)">BOOTH_EMAIL = #{boothEmail},</if>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(boothFeeExpln)">BOOTH_FEE_EXPLN = #{boothFeeExpln},</if>
			MOD_USER_SEQ = #{modUserSeq},
			MOD_DT = NOW()
		</set>
		WHERE
			FAIR_SEQ = #{fairSeq}
	</update>

	<insert id="insertBoothRegMng" parameterType="FairBoothMngBean">
		<if test="list.size != 0">
			INSERT INTO CPES_FAIR_BOOTH (
				BOOTH_SEQ,
				FAIR_SEQ,
				BOOTH_NM,
				BOOTH_FEE,
				USE_YN,
				BOOTH_STS_CD,
				REG_USER_SEQ,
				REG_DT
			) VALUES 
			<foreach collection="list" item="item" separator=",">
			(
				FN_GET_UUID_SEQ(),
				#{item.fairSeq},
				#{item.boothNm},
				#{item.boothFee},
				#{item.useYn},
				#{item.boothStsCd},
				#{item.regUserSeq},
				NOW()
			)			
			</foreach>			
		</if>
	</insert>
	
	<update id="updateBoothRegMng" parameterType="FairBoothMngBean">
		<if test="list.size != 0">
			<foreach collection="list" item="item" separator=";">
				UPDATE 
					CPES_FAIR_BOOTH 
				SET 
					BOOTH_NM = #{item.boothNm}, 
					BOOTH_FEE = #{item.boothFee},
					USE_YN = #{item.useYn}
				WHERE 
					BOOTH_SEQ = #{item.boothSeq}
				AND 
					FAIR_SEQ = #{item.fairSeq}
			</foreach>
		</if>
	</update>	

	<update id="updateFairBoothMng" parameterType="FairBoothMngBean">
		UPDATE
			CPES_FAIR_BOOTH
		<set>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(compnyInsttSeq)">COMPNY_INSTT_SEQ = #{compnyInsttSeq},</if>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(compnyInsttDivCd)">COMPNY_INSTT_DIV_CD = #{compnyInsttDivCd},</if>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(boothStsCd)">BOOTH_STS_CD = #{boothStsCd},</if>
		</set>
		WHERE
			BOOTH_SEQ = #{boothSeq}
		AND
			FAIR_SEQ = #{fairSeq}			
	</update>

	<update id="updateBoothReqMng" parameterType="FairBoothMngBean">
		UPDATE
			CPES_FAIR_BOOTH
		<set>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(boothStsCd)">
			BOOTH_STS_CD = #{boothStsCd},
				<if test="boothStsCd != 'BSC0000000001'">
				BOOTH_REQ_DT = NOW(),
				</if>
			</if>
		</set>
		WHERE
			BOOTH_SEQ = #{boothSeq}
		AND
			FAIR_SEQ = #{fairSeq}
	</update>

	<update id="deleteBoothReqMng" parameterType="FairBoothMngBean">
		UPDATE
			CPES_FAIR_BOOTH
		<set>
			COMPNY_INSTT_SEQ = NULL,
			COMPNY_INSTT_DIV_CD = NULL,
			BOOTH_REQ_DT = NULL,
			BOOTH_CANCEL_REQ_DT = NULL,
			BOOTH_STS_CD = 'BSC0000000001'
		</set>
		WHERE
			BOOTH_SEQ = #{boothSeq}
		AND
			FAIR_SEQ = #{fairSeq}
	</update>

	<update id="updateBoothCompnyInsttMng" parameterType="FairBoothMngBean">
		UPDATE
			CPES_FAIR_BOOTH
		<set>
			COMPNY_INSTT_SEQ = #{compnyInsttSeq},
			COMPNY_INSTT_DIV_CD = #{compnyInsttDivCd},
		</set>
		WHERE
			BOOTH_SEQ = #{boothSeq}
		AND
			FAIR_SEQ = #{fairSeq}
	</update>
</mapper>
