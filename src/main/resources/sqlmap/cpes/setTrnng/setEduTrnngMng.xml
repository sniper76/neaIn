<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="setEduTrnngMng">

	<update id="updateEduTrnng" parameterType="EduTrnngMngBean">
		UPDATE
			CPES_EDU_TRNNG
		<set>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(jcAgreeStsCd)">JC_AGREE_STS_CD = #{jcAgreeStsCd},</if>
			<if test="@org.apache.commons.lang.StringUtils@isNotBlank(recrumtStsCd)">RECRUMT_STS_CD = #{recrumtStsCd},</if>
			JC_USER_SEQ = #{user.userSeq},
			JC_AGREE_DT = NOW()
		</set>
		WHERE
			EDU_TRNNG_SEQ = #{eduTrnngSeq}
	</update>
<!-- 
	<insert id="insertEduTrnngLog" parameterType="EduTrnngMngBean">
		INSERT INTO CPES_EDU_TRNNG_LOG (
			EDU_TRNNG_LOG_SEQ,
			EDU_TRNNG_SEQ,
			EDU_TRNNG_NM,
			EDU_BGN_DT,
			EDU_END_DT,
			TRNNG_NATNEXP_DIV_CD,
			SPONSOR,
			RECURMT_BGN_DT,
			RECURMT_END_DT,
			EDU_DIV_CD,
			EDU_DURA,
			DAY_TIME,
			ADDR_CD,
			PROVC_CD,
			JC_AGREE_STS_CD,
			JC_CD,
			JC_USER_SEQ,
			INSTT_SEQ,
			CATE_CD,
			PROC_PROGRAM_STUDY,
			DEGREE_AWARDS,
			PROSPECT_OCCUP_CATE,
			TUITION,
			USE_YN,
			DEL_YN,
			RECRUMT_STS_CD,
			JC_AGREE_DT,
			JC_REJECT_DT,
			REG_USER_SEQ,
			REG_DT,
			MOD_USER_SEQ,
			MOD_DT
		) 
		SELECT 
			#{eduTrnngLogSeq} AS EDU_TRNNG_LOG_SEQ,
			EDU_TRNNG_SEQ,
			EDU_TRNNG_NM,
			EDU_BGN_DT,
			EDU_END_DT,
			TRNNG_NATNEXP_DIV_CD,
			SPONSOR,
			RECURMT_BGN_DT,
			RECURMT_END_DT,
			EDU_DIV_CD,
			EDU_DURA,
			DAY_TIME,
			ADDR_CD,
			PROVC_CD,
			JC_AGREE_STS_CD,
			JC_CD,
			JC_USER_SEQ,
			INSTT_SEQ,
			CATE_CD,
			PROC_PROGRAM_STUDY,
			DEGREE_AWARDS,
			PROSPECT_OCCUP_CATE,
			TUITION,
			USE_YN,
			DEL_YN,
			RECRUMT_STS_CD,
			JC_AGREE_DT,
			JC_REJECT_DT,
			REG_USER_SEQ,
			NOW() AS REG_DT,
			MOD_USER_SEQ,
			NOW() AS MOD_DT
		FROM
			CPES_EDU_TRNNG
		WHERE 
			EDU_TRNNG_SEQ = #{eduTrnngSeq}
	</insert>	
 -->	
<!-- 
	<update id="updateEduTrnngSub" parameterType="EduTrnngMngBean">
		UPDATE
			CPES_EDU_TRNNG_SUB
		<set>
		</set>
		WHERE
			EDU_TRNNG_SEQ = #{eduTrnngSeq}
	</update>

	<insert id="insertEduTrnngSubLog" parameterType="EduTrnngMngBean">
		INSERT INTO CPES_EDU_TRNNG_SUB_LOG (
			EDU_TRNNG_SUB_LOG_SEQ,
			EDU_TRNNG_SUB_SEQ,
			EDU_TRNNG_LOG_SEQ,
			EDU_TARGET,
			ADMSS_CRITERIA,
			CONTENT,
			ENROL_METHOD,
			SIGN,
			EDU_PROVD,
			FILE_GRP_SEQ,
			PROGRAM_CORS_TYPE_CD,
			MAJOR_1DEPTH_CD,
			MAJOR_2DEPTH_CD,
			SKILL_JOB_PROGRAM_CORS_CD,
			HIGH_GENRL_EDU_CORS_CD
		)
		SELECT
		 	FN_GET_UUID_SEQ AS EDU_TRNNG_SUB_LOG_SEQ,
			EDU_TRNNG_SUB_SEQ,
			#{eduTrnngLogSeq} AS EDU_TRNNG_LOG_SEQ,
			EDU_TARGET,
			ADMSS_CRITERIA,
			CONTENT,
			ENROL_METHOD,
			SIGN,
			EDU_PROVD,
			FILE_GRP_SEQ,
			PROGRAM_CORS_TYPE_CD,
			MAJOR_1DEPTH_CD,
			MAJOR_2DEPTH_CD,
			SKILL_JOB_PROGRAM_CORS_CD,
			HIGH_GENRL_EDU_CORS_CD
		FROM
			CPES_EDU_TRNNG_SUB
		WHERE 
			EDU_TRNNG_SUB_SEQ = #{eduTrnngSubSeq}			
	</insert>
 -->		
</mapper>
