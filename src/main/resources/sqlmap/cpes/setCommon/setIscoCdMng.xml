<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="setIscoCdMng">
	
	<insert id="insertIscoCdMng" parameterType="IscoCdMngBean">
		/** setIscoCdMng.insertIscoCdMng **/	
		INSERT INTO CPES_ISCO_CD
		(
			 ISCO_ID
			,ISCO_CD
			,EN_NM
			,KH_NM
			,CD_LVL
			,REG_USER_SEQ
			,REG_DT
			,MOD_USER_SEQ
			,MOD_DT
			,USE_YN
			,LVL
			,JOB_CATE_CD
		)VALUES(
			 #{iscoId}
			,#{iscoCd}
			,#{enNm}
			,#{khNm}
			<if test='depth == "1"'>
			,#{iscoId}
			</if>
			<if test='depth == "2"'>
			,CONCAT(#{oneDepth},'=>',#{iscoId})
			</if>
			<if test='depth == "3"'>
			,CONCAT(#{oneDepth},'=>',#{twoDepth},'=>',#{iscoId})
			</if>
			<if test='depth == "4"'>
			,CONCAT(#{oneDepth},'=>',#{twoDepth},'=>',#{threeDepth},'=>',#{iscoId})
			</if>
			,#{user.userSeq}
			,NOW()
			,#{user.userSeq}
			,NOW()
			,#{useYn}
			,#{depth}
			,#{jobCateCd}
		)
	</insert>
	
	<insert id="updateIscoCdMng" parameterType="IscoCdMngBean">
		UPDATE CPES_ISCO_CD SET 
			    EN_NM = #{enNm}
			  , KH_NM = #{khNm}
			  <if test='depth == "1"'>
				,CD_LVL = #{iscoId}
			  </if>
			  <if test='depth == "2"'>
				,CD_LVL = CONCAT(#{oneDepth},'=>',#{iscoId})
			  </if>
			  <if test='depth == "3"'>
				,CD_LVL = CONCAT(#{oneDepth},'=>',#{twoDepth},'=>',#{iscoId})
			  </if>
			  <if test='depth == "4"'>
				,CD_LVL = CONCAT(#{oneDepth},'=>',#{twoDepth},'=>',#{threeDepth},'=>',#{iscoId})
			  </if>
			  , MOD_USER_SEQ = #{user.userSeq}
			  , MOD_DT = NOW()
			  , USE_YN = #{useYn}
			  , LVL = #{depth}
			  , JOB_CATE_CD = #{jobCateCd}
			WHERE ISCO_CD = #{iscoCd}
	</insert>
	
	
	
</mapper>
